<app-header></app-header>

<aside *ngIf="article">
    <section>
        <div class="title">
            <h1>Actions</h1>
        </div>
        <div class="content">
            <div>
                <button class="fill">
                    Update
                </button>
            </div>
        </div>
    </section>
    <hr>
    <div *ngIf="isSubscribed">
        <section>
            <div class="title">
                <h1>Publisher</h1>
            </div>
            <div class="content">
                <a routerLink="/~{{article.author.publisher.id}}" class="dark">
                    {{article.author.publisher.name}}
                </a>
                <a href="{{article.author.publisher.url}}" class="dark">
                    {{article.author.publisher.url}}
                </a>
            </div>
        </section>
        <section>
            <div class="title">
                <h1>Author</h1>
            </div>
            <div class="content">
                <a routerLink="/~{{article.author.user.id}}" class="dark">
                    {{article.author.user.first_name}}
                    {{article.author.user.last_name}}
                </a>
            </div>
        </section>
        <section class="info">
            <div class="title">
                <h1>Info</h1>
            </div>
            <div class="content">
                <div>
                    <b>Reading Time</b>
                    <p *ngIf="article.reading_time >= 1">{{article.reading_time}} minutes</p>
                    <p *ngIf="article.reading_time < 1">less than a minute</p>
                </div>
                <div>
                    <b>Published</b>
                    <p>{{article.created_at | date:"medium"}}</p>
                </div>
                <div>
                    <b>Updated</b>
                    <p>{{article.updated_at | date:"medium"}}</p>
                </div>
            </div>
        </section>
    </div>
</aside>

<main *ngIf="article && isSubscribed">
    <h1 class="title">{{article.title}}</h1>
    <div class="content" [innerHTML]="article.content | keepHtml"></div>
    <section id="comments">
        <div class="title">
            <h1>Comments</h1>
        </div>
        <div class="content">
            <add-comment-form
                [article]="article"

                (commentCreated)="onCommentCreated($event)"
            >
            </add-comment-form>
            <comment-list [article]="article" [comments]="comments"></comment-list>
        </div>
    </section>
</main>

<main *ngIf="!isSubscribed">
    <div class="payment-required">
        <img src="/assets/credit-card-payment.svg" alt="">
        <h1>
            <span>You can't see this article</span>
        </h1>
        <p>
            In order to see it you need to subscribe to a bundle
            that includes the publisher of this article
        </p>
    </div>
</main>
